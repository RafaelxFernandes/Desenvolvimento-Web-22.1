<!DOCTYPE html>
<html>
    <head>
        <title>Desenho procedural em SVG</title>

        <script type = "text/javascript" src = "https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src = "https://code.jquery.com/ui/1.13.1/jquery-ui.js"></script>
    </head>    

    <body>

        <div id = "draggable-1">
            <svg width = 800 height = 600 style = "border:1px solid gray"></svg>
        </div>
        
        <div id = "draggable-2" style = "width: 180px; border-style: dotted;">

            <label>Variation: </label>
            <br>
            <input
                type = "radio"
                name = "variation"
                id = "variation-0"
                checked
                style = "margin-bottom: 20px;"
            />
            <label for = "variation-0">0</label>
            <input
                type = "radio"
                name = "variation"
                id = "variation-1"
            />
            <label for = "variation-1">1</label>
            <input
                type = "radio"
                name = "variation"
                id = "variation-2"
            />
            <label for = "variation-2">2</label>
            <input
            type = "radio"
            name = "variation"
            id = "variation-3"
            />
            <label for = "variation-3">3</label>
            
            <br>

            <label for = "ratio">Ratio:</label>
            <input
                type = "range"
                min  = "0"
                max = "1"
                value = "0.5"
                step = "0.01"
                id = "ratio"
                onchange = "updateTextInput(this.value, 'ratio-input');"
            />
            <input type = "text" id = "ratio-input" value = "0.5" style = "margin-bottom: 20px;">

            <br>

            <label for = "n">N:</label>
            <input
                type = "range"
                min  = "0"
                max = "30"
                value = "1"
                step = "1"
                id = "n"
                onchange = "updateTextInput(this.value, 'n-input');"
            />
            <input type = "text" id = "n-input" value = "1">

        </div>


        <script type = "text/javascript">

            function updateTextInput(val, id) {
                document.getElementById(id).value = val; 
            }

            
            var positions = JSON.parse(localStorage.positions || "{}");
            if (positions["#draggable-1"]) $("#draggable-1").css(positions["#draggable-1"]);
            if (positions["#draggable-2"]) $("#draggable-2").css(positions["#draggable-2"]);
        
            $("#draggable-1").draggable({
                scroll: true, 
                stop: function (event, ui) {
                    let positions = JSON.parse(localStorage.positions || "{}");
                    positions["#draggable-1"] = ui.position;
                    localStorage.positions = JSON.stringify(positions);
                }
            });

            $("#draggable-2").draggable({
                scroll: true, 
                stop: function (event, ui) {
                    let positions = JSON.parse(localStorage.positions || "{}");
                    positions["#draggable-2"] = ui.position;
                    localStorage.positions = JSON.stringify(positions);
                }
            });
                
        </script>

    </body>
</html>